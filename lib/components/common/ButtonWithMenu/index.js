import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import React,{useEffect,useState}from"react";import ArrowLeftOutline from"@scaleflex/icons/arrow-left-outline";import Menu from"@scaleflex/ui/core/menu";import MenuItem,{MenuItemIcon,MenuItemLabel}from"@scaleflex/ui/core/menu-item";import{StyledMainButton,StyledButtonWrapper,StyledMenuButton}from"./ButtonWithMenu.styled";var isFieButtonWithMenuMounted=!0,ButtonWithMenu=function(a){var b=a.label,c=a.onClick,d=a.title,e=a.color,f=a.menuFromBtn,g=a.menuItems,h=a.menuPosition,i=void 0===h?"bottom":h,j=a.arrowColor,k=a.disabled,l=void 0!==k&&k,m=a.className,n=a.menuStyle,o=a.wrapperStyle,p=useState(null),q=_slicedToArray(p,2),r=q[0],s=q[1],t="md",u=function(a){isFieButtonWithMenuMounted&&(a.stopPropagation(),s(a.currentTarget))},v=function(){isFieButtonWithMenuMounted&&s(null)},w=function(a){"function"==typeof a&&a(),v()};useEffect(function(){return isFieButtonWithMenuMounted=!0,function(){isFieButtonWithMenuMounted=!1}},[]);var x=0<g.length;return React.createElement(React.Fragment,null,React.createElement(StyledButtonWrapper,{className:"".concat(m,"-wrapper"),onClick:l?void 0:function handleButtonClick(a){f&&u(a),"function"==typeof c&&c()},style:o},React.createElement(StyledMainButton,{className:"".concat(m,"-button"),color:e,size:t,title:d,keepBorderRadius:!x,disabled:l},b),x&&React.createElement(StyledMenuButton,{className:"".concat(m,"-menu-opener"),color:e,size:t,onClick:f||l?void 0:u,disabled:l},React.createElement(ArrowLeftOutline,{color:j}))),x&&React.createElement(Menu,{className:"".concat(m,"-menu"),anchorEl:r,onClose:v,open:!0,style:n,position:i},g.map(function(a){return a&&React.createElement(MenuItem,{className:"".concat(m,"-menu-item"),key:a.key,active:a.isActive,onClick:function(){return w(a.onClick)},size:t},a.icon&&React.createElement(MenuItemIcon,{size:t},"string"==typeof a.icon?React.createElement("span",{dangerouslySetInnerHTML:{__html:a.icon}}):React.createElement(a.icon,null)),React.createElement(MenuItemLabel,null,a.label))})))};ButtonWithMenu.defaultProps={title:"",color:"primary",menuFromBtn:!1,menuPosition:"bottom",onClick:void 0,disabled:!1,arrowColor:void 0,menuStyle:void 0,wrapperStyle:void 0};export default ButtonWithMenu;