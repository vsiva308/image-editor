import React,{useCallback,useEffect,useMemo}from"react";import{SELECT_TOOL}from"../../actions";import{TABS_TOOLS,TOOLS_ITEMS}from"../tools/tools.constants";import{TABS_IDS}from"../../utils/constants";import{useStore}from"../../hooks";import{StyledToolsBar,StyledToolsBarItems}from"./ToolsBar.styled";import ToolsBarItemOptionsWrapper from"./ToolsBarItemOptionsWrapper";var ToolsBar=function(){var a,b=useStore(),c=b.t,d=b.dispatch,e=b.tabId,f=b.toolId,g=b.annotations,h=b.selectionsIds,i=void 0===h?[]:h,j=b.config,k=j.defaultTabId,l=j.defaultToolId,m=j.useCloudimage,n=e||k,o=f||l||(null===(a=TABS_TOOLS[n])||void 0===a?void 0:a[0]),p=useMemo(function(){return TABS_TOOLS[n]||[]},[n]),q=useCallback(function(a){d({type:SELECT_TOOL,payload:{toolId:a}})},[]),r=useMemo(function(){return p.map(function(a){var b=TOOLS_ITEMS[a],d=b.Item,e=b.hideFn;return d&&(!e||!e({useCloudimage:m}))&&React.createElement(d,{key:a,selectTool:q,t:c,isSelected:o===a})})},[p,o]),s=useMemo(function(){var a,b,c;if(!o)return!1;if(n===TABS_IDS.ANNOTATE){var h=i.length;if(1===h){var d,e=g[i[0]];return null===(d=TOOLS_ITEMS[e.name])||void 0===d?void 0:d.ItemOptions}if(1<h)return null}return n&&o&&TABS_TOOLS[n].includes(o)&&(!(null!==(a=TOOLS_ITEMS[f])&&void 0!==a&&a.hideFn)||!(null!==(b=TOOLS_ITEMS[f])&&void 0!==b&&b.hideFn({useCloudimage:m})))&&(null===(c=TOOLS_ITEMS[f])||void 0===c?void 0:c.ItemOptions)},[n,o,g,i]);return useEffect(function(){!f&&o&&d({type:SELECT_TOOL,payload:{toolId:o}})},[]),React.createElement(StyledToolsBar,{className:"FIE_tools-bar-wrapper"},React.createElement(ToolsBarItemOptionsWrapper,null,s&&React.createElement(s,{t:c})),r&&React.createElement(StyledToolsBarItems,{className:"FIE_tools-bar"},r))};export default ToolsBar;